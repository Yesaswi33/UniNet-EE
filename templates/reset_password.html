<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Reset Password | UrbanVision AI</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
<header class="navbar">
    <div class="nav-container">
        <a class="logo" href="/">UrbanVision AI</a>
    </div>
</header>

<div class="page-bg">
    <div class="auth-box">

        <div class="auth-icon">ðŸ”‘</div>

        <h2>Reset Your Password</h2>
        <p class="auth-subtext">Enter the OTP and set a new password.</p>

        {% if error %}<p style="color:red; text-align:center;">{{ error }}</p>{% endif %}
        {% if message %}<p style="color:green; text-align:center;">{{ message }}</p>{% endif %}

        <form method="POST" onsubmit="return validateReset()">
            <label>OTP</label>
            <input type="text" id="otp" name="otp" placeholder="Enter the OTP sent to your email" required>

            <label>New Password</label>
            <input type="password" id="password" name="password" placeholder="Enter new password" required>

            <label>Confirm Password</label>
            <input type="password" id="confirm_password" name="confirm_password" placeholder="Re-enter new password" required>

            <button type="submit" class="btn-primary full-btn">Reset Password</button>
        </form>

        <p class="switch-auth"><a href="/login">Back to Login</a></p>

    </div>
</div>

<script>
function validateReset() {
    const otp = document.getElementById("otp").value.trim();
    const password = document.getElementById("password").value.trim();
    const confirm = document.getElementById("confirm_password").value.trim();

    if (!otp || !password || !confirm) { alert("All fields required"); return false; }
    if (password.length < 6) { alert("Password must be at least 6 chars"); return false; }
    if (password !== confirm) { alert("Passwords do not match"); return false; }

    return true;
}
</script>
</body>
</html>
